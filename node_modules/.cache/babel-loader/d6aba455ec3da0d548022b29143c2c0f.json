{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useState,useEffect}from'react';import{useWallet}from'@binance-chain/bsc-use-wallet';import BigNumber from'bignumber.js';import{useLottery,useLotteryTicket}from'hooks/useContract';import useRefresh from'./useRefresh';import{getTotalRewards,getTotalClaim,getMatchingRewardLength,getWinningNumbers,getTickets}from'../utils/lotteryUtils';var useTickets=function useTickets(){var lotteryNumber=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tickets=_useState2[0],setTickets=_useState2[1];var _useWallet=useWallet(),account=_useWallet.account;var ticketsContract=useLotteryTicket();var lotteryContract=useLottery();var _useRefresh=useRefresh(),fastRefresh=_useRefresh.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getTickets(lotteryContract,ticketsContract,account,lotteryNumber);case 2:res=_context.sent;setTickets(res);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchBalance(){return _ref.apply(this,arguments);};}();if(account&&lotteryContract&&ticketsContract){fetchBalance();}},[account,lotteryContract,ticketsContract,fastRefresh,lotteryNumber]);return tickets;};export var useTotalRewards=function useTotalRewards(){var _useState3=useState(new BigNumber(0)),_useState4=_slicedToArray(_useState3,2),rewards=_useState4[0],setRewards=_useState4[1];var lotteryContract=useLottery();var _useRefresh2=useRefresh(),fastRefresh=_useRefresh2.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getTotalRewards(lotteryContract);case 2:res=_context2.sent;setRewards(new BigNumber(res));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchBalance(){return _ref2.apply(this,arguments);};}();if(lotteryContract){fetchBalance();}},[lotteryContract,fastRefresh]);return rewards;};export var useTotalClaim=function useTotalClaim(){var _useState5=useState(new BigNumber(0)),_useState6=_slicedToArray(_useState5,2),claimAmount=_useState6[0],setClaimAmount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),claimLoading=_useState8[0],setClaimLoading=_useState8[1];var _useWallet2=useWallet(),account=_useWallet2.account;var ticketsContract=useLotteryTicket();var lotteryContract=useLottery();var fetchBalance=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var claim;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setClaimLoading(true);_context3.next=3;return getTotalClaim(lotteryContract,ticketsContract,account);case 3:claim=_context3.sent;setClaimAmount(claim);setClaimLoading(false);case 6:case\"end\":return _context3.stop();}}},_callee3);})),[account,lotteryContract,ticketsContract]);useEffect(function(){if(account&&lotteryContract&&ticketsContract){fetchBalance();}},[account,fetchBalance,lotteryContract,ticketsContract]);return{claimLoading:claimLoading,claimAmount:claimAmount};};export var useWinningNumbers=function useWinningNumbers(){var _useState9=useState([0,0,0,0]),_useState10=_slicedToArray(_useState9,2),winngNumbers=_useState10[0],setWinningNumbers=_useState10[1];var lotteryContract=useLottery();var _useRefresh3=useRefresh(),fastRefresh=_useRefresh3.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var rewards;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getWinningNumbers(lotteryContract);case 2:rewards=_context4.sent;setWinningNumbers(rewards);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchBalance(){return _ref4.apply(this,arguments);};}();if(lotteryContract){fetchBalance();}},[fastRefresh,lotteryContract,setWinningNumbers]);return winngNumbers;};export var useMatchingRewardLength=function useMatchingRewardLength(numbers){var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),matchingNumbers=_useState12[0],setMatchingNumbers=_useState12[1];var lotteryContract=useLottery();var _useRefresh4=useRefresh(),fastRefresh=_useRefresh4.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var matchedNumbaers;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getMatchingRewardLength(lotteryContract,numbers);case 2:matchedNumbaers=_context5.sent;setMatchingNumbers(matchedNumbaers);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function fetchBalance(){return _ref5.apply(this,arguments);};}();if(lotteryContract){fetchBalance();}},[lotteryContract,numbers,fastRefresh]);return matchingNumbers;};export default useTickets;","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/Naughty/naughty_front/src/hooks/useTickets.ts"],"names":["useCallback","useState","useEffect","useWallet","BigNumber","useLottery","useLotteryTicket","useRefresh","getTotalRewards","getTotalClaim","getMatchingRewardLength","getWinningNumbers","getTickets","useTickets","lotteryNumber","tickets","setTickets","account","ticketsContract","lotteryContract","fastRefresh","fetchBalance","res","useTotalRewards","rewards","setRewards","useTotalClaim","claimAmount","setClaimAmount","claimLoading","setClaimLoading","claim","useWinningNumbers","winngNumbers","setWinningNumbers","useMatchingRewardLength","numbers","matchingNumbers","setMatchingNumbers","matchedNumbaers"],"mappings":"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","sourcesContent":["import { useCallback, useState, useEffect } from 'react'\r\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useLottery, useLotteryTicket } from 'hooks/useContract'\r\nimport useRefresh from './useRefresh'\r\nimport {\r\n  getTotalRewards,\r\n  getTotalClaim,\r\n  getMatchingRewardLength,\r\n  getWinningNumbers,\r\n  getTickets,\r\n} from '../utils/lotteryUtils'\r\n\r\nconst useTickets = (lotteryNumber = null) => {\r\n  const [tickets, setTickets] = useState([])\r\n  const { account } = useWallet()\r\n  const ticketsContract = useLotteryTicket()\r\n  const lotteryContract = useLottery()\r\n  const { fastRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const res = await getTickets(lotteryContract, ticketsContract, account, lotteryNumber)\r\n      setTickets(res)\r\n    }\r\n\r\n    if (account && lotteryContract && ticketsContract) {\r\n      fetchBalance()\r\n    }\r\n  }, [account, lotteryContract, ticketsContract, fastRefresh, lotteryNumber])\r\n\r\n  return tickets\r\n}\r\n\r\nexport const useTotalRewards = () => {\r\n  const [rewards, setRewards] = useState(new BigNumber(0))\r\n  const lotteryContract = useLottery()\r\n  const { fastRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const res = await getTotalRewards(lotteryContract)\r\n      setRewards(new BigNumber(res))\r\n    }\r\n\r\n    if (lotteryContract) {\r\n      fetchBalance()\r\n    }\r\n  }, [lotteryContract, fastRefresh])\r\n\r\n  return rewards\r\n}\r\n\r\nexport const useTotalClaim = () => {\r\n  const [claimAmount, setClaimAmount] = useState(new BigNumber(0))\r\n  const [claimLoading, setClaimLoading] = useState(false)\r\n  const { account } = useWallet()\r\n  const ticketsContract = useLotteryTicket()\r\n  const lotteryContract = useLottery()\r\n\r\n  const fetchBalance = useCallback(async () => {\r\n    setClaimLoading(true)\r\n    const claim = await getTotalClaim(lotteryContract, ticketsContract, account)\r\n    setClaimAmount(claim)\r\n    setClaimLoading(false)\r\n  }, [account, lotteryContract, ticketsContract])\r\n\r\n  useEffect(() => {\r\n    if (account && lotteryContract && ticketsContract) {\r\n      fetchBalance()\r\n    }\r\n  }, [account, fetchBalance, lotteryContract, ticketsContract])\r\n\r\n  return { claimLoading, claimAmount }\r\n}\r\n\r\nexport const useWinningNumbers = () => {\r\n  const [winngNumbers, setWinningNumbers] = useState([0, 0, 0, 0])\r\n  const lotteryContract = useLottery()\r\n  const { fastRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const rewards = await getWinningNumbers(lotteryContract)\r\n      setWinningNumbers(rewards)\r\n    }\r\n\r\n    if (lotteryContract) {\r\n      fetchBalance()\r\n    }\r\n  }, [fastRefresh, lotteryContract, setWinningNumbers])\r\n\r\n  return winngNumbers\r\n}\r\n\r\nexport const useMatchingRewardLength = (numbers) => {\r\n  const [matchingNumbers, setMatchingNumbers] = useState(0)\r\n  const lotteryContract = useLottery()\r\n  const { fastRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const matchedNumbaers = await getMatchingRewardLength(lotteryContract, numbers)\r\n      setMatchingNumbers(matchedNumbaers)\r\n    }\r\n\r\n    if (lotteryContract) {\r\n      fetchBalance()\r\n    }\r\n  }, [lotteryContract, numbers, fastRefresh])\r\n\r\n  return matchingNumbers\r\n}\r\n\r\nexport default useTickets\r\n"]},"metadata":{},"sourceType":"module"}