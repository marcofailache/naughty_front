{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/ivopascoal/Desktop/Naughty/naughty_front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useCallback,useState}from'react';import styled from'styled-components';import{Button,Heading,Won,useModal}from'@pancakeswap-libs/uikit';import useI18n from'hooks/useI18n';import{getBalanceNumber}from'utils/formatBalance';import{useMultiClaimLottery}from'hooks/useBuyLottery';import useTickets,{useTotalClaim}from'hooks/useTickets';import Loading from'../Loading';import MyTicketsModal from'../TicketCard/UserTicketsModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var WinningsWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: baseline;\\n\"])));var IconWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-bottom: 16px;\\n\\n  svg {\\n    width: 80px;\\n    height: 80px;\\n  }\\n\"])));var StyledCardActions=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  margin-top: \",\"px;\\n\"])),function(props){return props.theme.spacing[3];});var StyledCardContentInner=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex: 1;\\n  flex-direction: column;\\n  justify-content: space-between;\\n\"])));var StyledButton=styled(Button)(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin-top: \",\"px;\\n\"])),function(props){return props.theme.spacing[1];});var PrizesWonContent=function PrizesWonContent(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),requestedClaim=_useState2[0],setRequestedClaim=_useState2[1];var TranslateString=useI18n();var _useTotalClaim=useTotalClaim(),claimLoading=_useTotalClaim.claimLoading,claimAmount=_useTotalClaim.claimAmount;var _useMultiClaimLottery=useMultiClaimLottery(),onMultiClaim=_useMultiClaimLottery.onMultiClaim;var tickets=useTickets();var _useModal=useModal(/*#__PURE__*/_jsx(MyTicketsModal,{myTicketNumbers:tickets,from:\"buy\"})),_useModal2=_slicedToArray(_useModal,1),onPresentMyTickets=_useModal2[0];var handleClaim=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var txHash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setRequestedClaim(true);_context.next=4;return onMultiClaim();case 4:txHash=_context.sent;// user rejected tx or didn't go thru\nif(txHash){setRequestedClaim(false);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);})),[onMultiClaim,setRequestedClaim]);var winnings=getBalanceNumber(claimAmount).toFixed(2);return/*#__PURE__*/_jsxs(StyledCardContentInner,{children:[/*#__PURE__*/_jsx(IconWrapper,{children:/*#__PURE__*/_jsx(Won,{})}),/*#__PURE__*/_jsx(Heading,{as:\"h3\",size:\"lg\",color:\"secondary\",children:TranslateString(999,'You won!')}),claimLoading&&/*#__PURE__*/_jsx(Loading,{}),!claimLoading&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(WinningsWrapper,{children:[/*#__PURE__*/_jsx(Heading,{as:\"h4\",size:\"xl\",style:{marginRight:'6px'},children:winnings}),/*#__PURE__*/_jsx(Heading,{as:\"h4\",size:\"lg\",children:\"PASTA\"})]})}),/*#__PURE__*/_jsx(StyledCardActions,{children:/*#__PURE__*/_jsx(Button,{fullWidth:true,disabled:requestedClaim,onClick:handleClaim,children:TranslateString(999,'Collect')})}),/*#__PURE__*/_jsx(StyledButton,{variant:\"text\",onClick:onPresentMyTickets,children:TranslateString(432,'View your tickets')})]});};export default PrizesWonContent;","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/Naughty/naughty_front/src/views/Lottery/components/YourPrizesCard/PrizesWonContent.tsx"],"names":["React","useCallback","useState","styled","Button","Heading","Won","useModal","useI18n","getBalanceNumber","useMultiClaimLottery","useTickets","useTotalClaim","Loading","MyTicketsModal","WinningsWrapper","div","IconWrapper","StyledCardActions","props","theme","spacing","StyledCardContentInner","StyledButton","PrizesWonContent","requestedClaim","setRequestedClaim","TranslateString","claimLoading","claimAmount","onMultiClaim","tickets","onPresentMyTickets","handleClaim","txHash","console","error","winnings","toFixed","marginRight"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button, Heading, Won, useModal } from '@pancakeswap-libs/uikit'\r\nimport useI18n from 'hooks/useI18n'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { useMultiClaimLottery } from 'hooks/useBuyLottery'\r\nimport useTickets, { useTotalClaim } from 'hooks/useTickets'\r\nimport Loading from '../Loading'\r\nimport MyTicketsModal from '../TicketCard/UserTicketsModal'\r\n\r\nconst WinningsWrapper = styled.div`\r\n  display: flex;\r\n  align-items: baseline;\r\n`\r\n\r\nconst IconWrapper = styled.div`\r\n  margin-bottom: 16px;\r\n\r\n  svg {\r\n    width: 80px;\r\n    height: 80px;\r\n  }\r\n`\r\n\r\nconst StyledCardActions = styled.div`\r\n  margin-top: ${(props) => props.theme.spacing[3]}px;\r\n`\r\n\r\nconst StyledCardContentInner = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  flex: 1;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n`\r\n\r\nconst StyledButton = styled(Button)`\r\n  margin-top: ${(props) => props.theme.spacing[1]}px;\r\n`\r\n\r\nconst PrizesWonContent: React.FC = () => {\r\n  const [requestedClaim, setRequestedClaim] = useState(false)\r\n  const TranslateString = useI18n()\r\n  const { claimLoading, claimAmount } = useTotalClaim()\r\n  const { onMultiClaim } = useMultiClaimLottery()\r\n  const tickets = useTickets()\r\n  const [onPresentMyTickets] = useModal(<MyTicketsModal myTicketNumbers={tickets} from=\"buy\" />)\r\n\r\n  const handleClaim = useCallback(async () => {\r\n    try {\r\n      setRequestedClaim(true)\r\n      const txHash = await onMultiClaim()\r\n      // user rejected tx or didn't go thru\r\n      if (txHash) {\r\n        setRequestedClaim(false)\r\n      }\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }, [onMultiClaim, setRequestedClaim])\r\n\r\n  const winnings = getBalanceNumber(claimAmount).toFixed(2)\r\n\r\n  return (\r\n    <StyledCardContentInner>\r\n      <IconWrapper>\r\n        <Won />\r\n      </IconWrapper>\r\n      <Heading as=\"h3\" size=\"lg\" color=\"secondary\">\r\n        {TranslateString(999, 'You won!')}\r\n      </Heading>\r\n      {claimLoading && <Loading />}\r\n      {!claimLoading && (\r\n        <>\r\n          <WinningsWrapper>\r\n            <Heading as=\"h4\" size=\"xl\" style={{ marginRight: '6px' }}>\r\n              {winnings}\r\n            </Heading>\r\n            <Heading as=\"h4\" size=\"lg\">\r\n              PASTA\r\n            </Heading>\r\n          </WinningsWrapper>\r\n        </>\r\n      )}\r\n      <StyledCardActions>\r\n        <Button fullWidth disabled={requestedClaim} onClick={handleClaim}>\r\n          {TranslateString(999, 'Collect')}\r\n        </Button>\r\n      </StyledCardActions>\r\n      <StyledButton variant=\"text\" onClick={onPresentMyTickets}>\r\n        {TranslateString(432, 'View your tickets')}\r\n      </StyledButton>\r\n    </StyledCardContentInner>\r\n  )\r\n}\r\n\r\nexport default PrizesWonContent\r\n"]},"metadata":{},"sourceType":"module"}