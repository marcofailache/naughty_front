{"ast":null,"code":"var _jsxFileName = \"/Users/ivopascoal/Desktop/Naughty/naughty_front/src/views/Lottery/components/TicketCard/TicketActions.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport { Button, useModal } from '@pancakeswap-libs/uikit';\nimport useI18n from 'hooks/useI18n';\nimport useGetLotteryHasDrawn from 'hooks/useGetLotteryHasDrawn';\nimport { useLotteryAllowance } from 'hooks/useAllowance';\nimport { useLotteryApprove } from 'hooks/useApprove';\nimport useTickets from 'hooks/useTickets';\nimport useTokenBalance from 'hooks/useTokenBalance';\nimport { getCakeAddress } from 'utils/addressHelpers';\nimport BuyTicketModal from './BuyTicketModal';\nimport MyTicketsModal from './UserTicketsModal';\nimport PurchaseWarningModal from './PurchaseWarningModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CardActions = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: ${props => props.theme.spacing[3]}px;\n\n  ${({\n  theme\n}) => theme.mediaQueries.lg} {\n    justify-content: space-between;\n  }\n`;\n_c = CardActions;\n\nconst TicketCard = () => {\n  _s();\n\n  const [requestedApproval, setRequestedApproval] = useState(false);\n  const TranslateString = useI18n();\n  const allowance = useLotteryAllowance();\n  const {\n    onApprove\n  } = useLotteryApprove();\n  const lotteryHasDrawn = useGetLotteryHasDrawn();\n  const cakeBalance = useTokenBalance(getCakeAddress());\n  const tickets = useTickets();\n  const ticketsLength = tickets.length;\n  const [onPresentMyTickets] = useModal( /*#__PURE__*/_jsxDEV(MyTicketsModal, {\n    myTicketNumbers: tickets,\n    from: \"buy\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 41\n  }, this));\n  const [onPresentApprove] = useModal( /*#__PURE__*/_jsxDEV(PurchaseWarningModal, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 39\n  }, this));\n  const [onPresentBuy] = useModal( /*#__PURE__*/_jsxDEV(BuyTicketModal, {\n    max: cakeBalance,\n    tokenName: \"CAKE\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 35\n  }, this));\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true);\n      const txHash = await onApprove(); // user rejected tx or didn't go thru\n\n      if (!txHash) {\n        setRequestedApproval(false);\n      }\n\n      onPresentApprove();\n    } catch (e) {\n      console.error(e);\n    }\n  }, [onApprove, onPresentApprove]);\n\n  const renderLotteryTicketButtons = () => {\n    if (!allowance.toNumber()) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          disabled: true,\n          children: TranslateString(432, 'View your tickets')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          disabled: requestedApproval,\n          onClick: handleApprove,\n          children: TranslateString(999, 'Approve PASTA')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          marginRight: '8px'\n        },\n        fullWidth: true,\n        disabled: ticketsLength === 0,\n        variant: \"secondary\",\n        onClick: onPresentMyTickets,\n        children: TranslateString(432, 'View your tickets')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        id: \"lottery-buy-start\",\n        fullWidth: true,\n        onClick: onPresentBuy,\n        children: TranslateString(430, 'Buy ticket')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(CardActions, {\n    children: lotteryHasDrawn ? /*#__PURE__*/_jsxDEV(Button, {\n      disabled: true,\n      children: [\" \", TranslateString(999, 'On sale soon')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this) : renderLotteryTicketButtons()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TicketCard, \"yaUpyXhPeiKWDZ5HZ5RFHH4OPwg=\", false, function () {\n  return [useI18n, useLotteryAllowance, useLotteryApprove, useGetLotteryHasDrawn, useTokenBalance, useTickets, useModal, useModal, useModal];\n});\n\n_c2 = TicketCard;\nexport default TicketCard;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CardActions\");\n$RefreshReg$(_c2, \"TicketCard\");","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/Naughty/naughty_front/src/views/Lottery/components/TicketCard/TicketActions.tsx"],"names":["React","useCallback","useState","styled","Button","useModal","useI18n","useGetLotteryHasDrawn","useLotteryAllowance","useLotteryApprove","useTickets","useTokenBalance","getCakeAddress","BuyTicketModal","MyTicketsModal","PurchaseWarningModal","CardActions","div","props","theme","spacing","mediaQueries","lg","TicketCard","requestedApproval","setRequestedApproval","TranslateString","allowance","onApprove","lotteryHasDrawn","cakeBalance","tickets","ticketsLength","length","onPresentMyTickets","onPresentApprove","onPresentBuy","handleApprove","txHash","e","console","error","renderLotteryTicketButtons","toNumber","marginRight"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button, useModal } from '@pancakeswap-libs/uikit'\r\nimport useI18n from 'hooks/useI18n'\r\nimport useGetLotteryHasDrawn from 'hooks/useGetLotteryHasDrawn'\r\nimport { useLotteryAllowance } from 'hooks/useAllowance'\r\nimport { useLotteryApprove } from 'hooks/useApprove'\r\nimport useTickets from 'hooks/useTickets'\r\nimport useTokenBalance from 'hooks/useTokenBalance'\r\nimport { getCakeAddress } from 'utils/addressHelpers'\r\nimport BuyTicketModal from './BuyTicketModal'\r\nimport MyTicketsModal from './UserTicketsModal'\r\nimport PurchaseWarningModal from './PurchaseWarningModal'\r\n\r\nconst CardActions = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: ${(props) => props.theme.spacing[3]}px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    justify-content: space-between;\r\n  }\r\n`\r\n\r\nconst TicketCard: React.FC = () => {\r\n  const [requestedApproval, setRequestedApproval] = useState(false)\r\n  const TranslateString = useI18n()\r\n  const allowance = useLotteryAllowance()\r\n  const { onApprove } = useLotteryApprove()\r\n  const lotteryHasDrawn = useGetLotteryHasDrawn()\r\n  const cakeBalance = useTokenBalance(getCakeAddress())\r\n\r\n  const tickets = useTickets()\r\n  const ticketsLength = tickets.length\r\n  const [onPresentMyTickets] = useModal(<MyTicketsModal myTicketNumbers={tickets} from=\"buy\" />)\r\n  const [onPresentApprove] = useModal(<PurchaseWarningModal />)\r\n  const [onPresentBuy] = useModal(<BuyTicketModal max={cakeBalance} tokenName=\"CAKE\" />)\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    try {\r\n      setRequestedApproval(true)\r\n      const txHash = await onApprove()\r\n      // user rejected tx or didn't go thru\r\n      if (!txHash) {\r\n        setRequestedApproval(false)\r\n      }\r\n      onPresentApprove()\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }, [onApprove, onPresentApprove])\r\n\r\n  const renderLotteryTicketButtons = () => {\r\n    if (!allowance.toNumber()) {\r\n      return (\r\n        <>\r\n          <Button fullWidth disabled>\r\n            {TranslateString(432, 'View your tickets')}\r\n          </Button>\r\n          <Button fullWidth disabled={requestedApproval} onClick={handleApprove}>\r\n            {TranslateString(999, 'Approve PASTA')}\r\n          </Button>\r\n        </>\r\n      )\r\n    }\r\n    return (\r\n      <>\r\n        <Button\r\n          style={{ marginRight: '8px' }}\r\n          fullWidth\r\n          disabled={ticketsLength === 0}\r\n          variant=\"secondary\"\r\n          onClick={onPresentMyTickets}\r\n        >\r\n          {TranslateString(432, 'View your tickets')}\r\n        </Button>\r\n        <Button id=\"lottery-buy-start\" fullWidth onClick={onPresentBuy}>\r\n          {TranslateString(430, 'Buy ticket')}\r\n        </Button>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <CardActions>\r\n      {lotteryHasDrawn ? (\r\n        <Button disabled> {TranslateString(999, 'On sale soon')}</Button>\r\n      ) : (\r\n        renderLotteryTicketButtons()\r\n      )}\r\n    </CardActions>\r\n  )\r\n}\r\n\r\nexport default TicketCard\r\n"]},"metadata":{},"sourceType":"module"}